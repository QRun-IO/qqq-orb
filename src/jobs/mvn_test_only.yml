description: >
  Complete test-only workflow for feature branches
  Runs build, test, API version check, and documentation generation
  Used by: test_only workflow for feature branches
  Triggers: Any push to branches NOT matching develop, main, release/*, hotfix/*

executor: java

parameters:
  java_version:
    type: string
    default: "21"
    description: "Java major version to install (e.g., '17', '21')"
  check_middleware_api_versions:
    type: boolean
    default: false
    description: "Whether to run middleware API version checks"

steps:
  - install_java:
      java_version: << parameters.java_version >>
  - git_full_checkout
  - mvn_build
  - mvn_verify
  - when:
      condition: << parameters.check_middleware_api_versions >>
      steps:
        - check_middleware_api_versions
